var b=Object.defineProperty;var k=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(k(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const E="modulepreload",C=function(s){return"/"+s},p={},v=function(e,t,o){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=C(n),n in p)return;p[n]=!0;const r=n.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!o)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===n&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${u}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":E,r||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),r)return new Promise((c,h)=>{d.addEventListener("load",c),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())},m={codes:{konami:"ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a Enter",starpower:"7 1 7 0 7 2 7 3 6"},confettiOptions:{disableForReducedMotion:!0,spread:360,startVelocity:30,ticks:60,zIndex:0},duration:10,packages:{confetti:"https://cdn.skypack.dev/canvas-confetti@1.6.0"},timeLimit:1e3};var l=(s=>(s.Keyboard="keyboard",s.Gamepad="gamepad",s))(l||{});const g="gamepadconnected",L="gamepaddisconnected",y="keydown";class w{constructor(e=m.codes.konami,t=l.Keyboard,o=m.timeLimit,i=m.duration,n=m.confettiOptions){a(this,"pattern");a(this,"eventType");a(this,"timeLimit");a(this,"duration");a(this,"confettiOptions");a(this,"gamepads",{});a(this,"buttonState",{});a(this,"entries",[]);a(this,"lastEntryTime",this.now);a(this,"timer",0);this.pattern=e,this.eventType=t,this.timeLimit=o,this.duration=i,this.confettiOptions=n,this.gamepadConnected=this.gamepadConnected.bind(this),this.init=this.init.bind(this)}get now(){return Date.now()}get currentCode(){return this.entries.join(" ")}get gamepadIndexes(){return Object.keys(this.gamepads)}get connectedGamepads(){return navigator.getGamepads()}checkTime(){this.now-this.lastEntryTime>this.timeLimit&&(this.entries=[])}checkCode(e){const{key:t}=e;this.entries.push(t),this.lastEntryTime=this.now,this.currentCode===this.pattern&&this.loadConfetti()}gamepadConnected(e){const{gamepad:t}=e;console.info("Gamepad connected at index %d: %s. %d buttons, %d axes. Are you ready to rock?",t.index,t.id,t.buttons.length,t.axes.length),this.gamepads[t.index]=!0,this.readGamepadValues()}gamepadDisconnected(e){const{gamepad:t}=e;console.info("Gamepad disconnected from index %d: %s",t.index,t.id),delete this.gamepads[t.index]}buttonPressed(e){this.checkTime(),this.entries.push(e),this.lastEntryTime=this.now,this.currentCode===this.pattern&&this.loadConfetti()}readGamepadValues(){this.gamepadIndexes.forEach((e,t)=>{if(!e||!this.connectedGamepads||!this.connectedGamepads[t])return;const{buttons:o}=this.connectedGamepads[t];o.forEach((i,n)=>{i.pressed?this.buttonState[n]||(this.buttonState[n]=!0,this.buttonPressed(n)):delete this.buttonState[n]})}),this.gamepadIndexes.length>0&&window.requestAnimationFrame(this.readGamepadValues)}loadConfetti(){v(()=>import(m.packages.confetti),[]).then(e=>{const{default:t}=e,o=this.duration*1e3,i=this.now+o;this.timer=window.setInterval(()=>this.fireConfetti(t,o,i),250)})}fireConfetti(e,t,o){const i=o-this.now;i<=0&&clearInterval(this.timer);const n=50*(i/t),r=(c,h)=>Math.random()*(h-c)+c,u=()=>Math.random()-.2,f={particleCount:n,origin:{x:r(.1,.3),y:u()}},d={particleCount:n,origin:{x:r(.7,.9),y:u()}};e(Object.assign({},this.confettiOptions,f)),e(Object.assign({},this.confettiOptions,d)),this.destroy()}init(e){this.checkTime(),this.checkCode(e)}listen(){switch(this.eventType){case l.Gamepad:window.addEventListener(g,this.gamepadConnected),window.addEventListener(L,this.gamepadDisconnected);break;case l.Keyboard:default:document.addEventListener(y,this.init);break}}destroy(){switch(this.eventType){case l.Gamepad:window.removeEventListener(g,this.gamepadConnected);break;case l.Keyboard:default:document.removeEventListener(y,this.init);break}}}new w().listen();new w("7 1 7 0 7 2 7 3 6","gamepad").listen();
